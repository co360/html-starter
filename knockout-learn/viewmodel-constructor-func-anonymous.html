<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>KnockoutJS Starter</title>
    <script src="../resources/js/libs/knockout/knockout-3.5.0.debug.js"></script>
</head>
<body>

<div id="app">
    <div>upCase: <span data-bind="text: upCase('foo')"></span></div>
    <div>Message: <span data-bind="text: message"></span></div>
    <div>upCaseMessage: <span data-bind="text: upCaseMessage()"></span></div>
    <div>Link: <a href="#" data-bind="click: handleEvent">Test</a></div>
    <div>Button: <button data-bind="click: handleEvent">Test</button></div>
    <div>myList:
        <ul data-bind="foreach: myList">
            <li>
                <span data-bind="text: $data.name"></span>
                <a href="#" data-bind="click: $parent.handleEventByLoop">Test</a>
            </li>
        </ul>
    </div>
</div>

<script>
    // NOTE: Do not forget to use "new" on this anonymous constructor function,
    // or else your $parent will be "undefined" but other parts still works.
    // This will lead to very hard to debug problem!
    var vm = new function() {
        var self = this;
        this.message = ko.observable("Hello");
        this.myList = [{name: 'zemian'}, {name: 'kenny'}, {name: 'lily'}];
        
        self.upCase = function(str) {
            return str.toUpperCase();
        };
        self.upCaseMessage = function() {
            return self.upCase(this.message());
        };
        
        self.handleEvent = function(data, event) {
            // "this"" is same as data, which is the ViewModelContext
            console.log("this, data, event, message ", this, data, event, self.message());
        };
        
        self.handleEventByLoop = function(data, event) {
            console.log("this, data, event, message", this, data, event, self.message());
        }
    }();
    
    ko.applyBindings(vm);
</script>

</body>
</html>
