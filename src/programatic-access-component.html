<!doctype html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>OJET Starter</title>
  <link rel="icon" href="css/images/favicon.ico" type="image/x-icon"/>
  <link rel="stylesheet" href="css/alta/6.2.0/web/alta.css"/>

  <script type="text/javascript" src="js/libs/require/require.js"></script>
  <script type="text/javascript" src="js/main.js"></script>
  <script>
    require(['knockout', 'ojs/ojcore', 'ojs/ojknockout', 'ojs/ojbutton'], function (ko, oj) {
      function AppViewModel() {
        let self = this;

        console.log("oj:");
        console.log(oj);

        let busyContext = oj.Context.getPageContext().getBusyContext();
        busyContext.whenReady().then(function () {
          let button1 = document.querySelector("#button1");
          console.log("button1:");
          console.log(button1);

          console.log("button1 props:");
          for (let x in button1) { console.log(x); }

          console.log("Invoking button1.refresh() explicitly.");
          button1.refresh();
        });

        // Button ViewModel impl
        self.clickedButton = ko.observable("(None clicked yet)");
        self.buttonClick = function (event) {
          self.clickedButton(event.currentTarget.id);
        };
      }

      ko.applyBindings(new AppViewModel());
    });
  </script>
</head>
<body>

<h1>Button Demo</h1>
<div id='buttons-container'>
  <oj-button id='button1' on-oj-action='[[buttonClick]]'>Button 1</oj-button>
  <p id="last" class="bold">Button action:
    <span id="results"><oj-bind-text value="[[clickedButton]]"></oj-bind-text></span>
  </p>
</div>

</body>
</html>
